<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="如果你已经在使用 Shadowsocks，但是需要用命令行来下载 GFW 外的文件，那么你可以使用 Proxychains 代理命令行（Terminal）。">
    

    <!--Author-->
    
        <meta name="author" content="Dante">
    

    <!-- Title -->
    
    <title>使用Proxychains代理命令行 | Hello, the fucking world</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Content -->
    <section class="article-container">
<!-- Back Home -->
<a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

<!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>使用Proxychains代理命令行</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Main Content -->
            <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <script src="/assets/js/APlayer.min.js"> </script><p>如果你已经在使用 Shadowsocks，但是需要用命令行来下载 GFW 外的文件，那么你可以使用 Proxychains 代理命令行（Terminal）。</p>
<a id="more"></a>
<h2 id="0-准备工作"><a href="#0-准备工作" class="headerlink" title="0. 准备工作"></a>0. 准备工作</h2><p>在命令行输入<code>brew</code>以检查是否安装了<a href="https://brew.sh/" target="_blank" rel="noopener">Homebrew</a>，若没有，则输入下面的命令来安装：</p>
<pre><code class="bash">/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
</code></pre>
<h2 id="1-安装-Proxychains："><a href="#1-安装-Proxychains：" class="headerlink" title="1. 安装 Proxychains："></a>1. 安装 Proxychains：</h2><pre><code class="bash">brew install proxychains-ng
</code></pre>
<h2 id="2-查看-SS-本地端口号"><a href="#2-查看-SS-本地端口号" class="headerlink" title="2. 查看  SS 本地端口号"></a>2. 查看  SS 本地端口号</h2><p>Shadowsocks设置——本地 Socks5 监听地址（以及端口，默认是 <code>1080</code>）</p>
<h2 id="3-修改-Proxychains-配置文件"><a href="#3-修改-Proxychains-配置文件" class="headerlink" title="3. 修改 Proxychains 配置文件"></a>3. 修改 Proxychains 配置文件</h2><p>路径是<code>/usr/local/etc/proxychains.conf</code></p>
<pre><code>vim /usr/local/etc/proxychains.conf
</code></pre><p>vim是文本编辑命令，按下<code>I</code>进入编辑，找到文件最后的<code>[ProxyList]</code>, 输入步骤2查看的本地监听地址和端口，如<code>socks5  127.0.0.1 1080</code>, 然后点esc，输入<code>:wq</code>进行保存</p>
<h2 id="4-无法代理？"><a href="#4-无法代理？" class="headerlink" title="4. 无法代理？"></a>4. 无法代理？</h2><p>如果使用的<strong>OS X 系统 是 10.11 以下，则跳过这一步</strong>。由于 OS X 的新版本引入了一个新机制 <code>SIP (System Integrity Protection)</code>，即使 Root 权限也不能对一些二进制进行修改，这些二进制是在 <code>/System，/bin，/sbin，/usr (except /usr/local)</code> 中的。这就影响了 <code>proxychains</code> 的作用范围，不在上述目录中的二进制可以使用 <code>proxychains</code>，而在其中的就不行了。从目前的资料有来，有以下两种解决方法：</p>
<ul>
<li><p>把所有命令都放在/bin里，把/bin放在路径里</p>
</li>
<li><p>关闭 <code>SIP</code>：</p>
<ol>
<li>重启电脑，在重启的界面上按住 <em>Command</em> 和 <em>R</em> 键进入 <code>Recovery Mode</code>；</li>
</ol>
</li>
</ul>
<ol>
<li>左上角通用工具选择终端，运行：<code>csrutil disable</code> 和 <code>reboot</code></li>
</ol>
<h2 id="5-使用-Proxychains"><a href="#5-使用-Proxychains" class="headerlink" title="5. 使用 Proxychains"></a>5. 使用 Proxychains</h2><p>在要使用代理的命令前面加上 <code>proxychains4</code>即可；或者对当前终端都使用代理：</p>
<pre><code class="bash">Proxychains4 bash
</code></pre>
<p>然后你输入的命令都会走代理了。</p>
<p>测试：<code>curl https://www.twitter.com/</code> 若没有报错就表示代理成功啦。</p>

 
                <!-- Meta -->
                <div class="post-meta">
                    <hr>
                    <br>
                    <div class="post-tags">
                        
                            

<a href="/tags/proxy/">#proxy</a>


                        
                    </div>
                    <div class="post-date">
                        2018 年 04 月 17 日
                    </div>
                </div>
            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- Disqus Comments -->


            </div>
        </div>
    </div>
</article>
</section>

    <!-- Scripts -->
    <!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript">
	console.log('Hexo-theme-hollow designed by zchen9 🙋 © 2015-' + (new Date()).getFullYear());
</script>

    <!-- Google Analytics -->
    

</body>

</html>